(self["webpackChunkporta_facil"]=self["webpackChunkporta_facil"]||[]).push([[181],{713:function(e,t,r){"use strict";var n=r(9565),a=r(9306),o=r(8551),i=r(1767),s=r(9462),u=r(6319),l=s((function(){var e=this.iterator,t=o(n(this.next,e)),r=this.done=!!t.done;if(!r)return u(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return o(this),a(e),new l(i(this),{mapper:e})}},1701:function(e,t,r){"use strict";var n=r(6518),a=r(713),o=r(6395);n({target:"Iterator",proto:!0,real:!0,forced:o},{map:a})},2529:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,r){"use strict";var n=r(6840);e.exports=function(e,t,r){for(var a in t)n(e,a,t[a],r);return e}},6319:function(e,t,r){"use strict";var n=r(8551),a=r(9539);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(i){a(e,"throw",i)}}},7547:function(e){(function(t,r){e.exports=r()})(0,(function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,r){"use strict";function n(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var a=r(2),o=r(0),i=r.n(o);t.a=function(e,t){var o=t.value;if((Array.isArray(o)||"string"==typeof o)&&(o={mask:o,tokens:i.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var s=e.getElementsByTagName("input");if(1!==s.length)throw new Error("v-mask directive requires 1 input, found "+s.length);e=s[0]}e.oninput=function(t){if(t.isTrusted){var i=e.selectionEnd,s=e.value[i-1];for(e.value=r.i(a.a)(e.value,o.mask,!0,o.tokens);i<e.value.length&&e.value.charAt(i-1)!==s;)i++;e===document.activeElement&&(e.setSelectionRange(i,i),setTimeout((function(){e.setSelectionRange(i,i)}),0)),e.dispatchEvent(n("input"))}};var u=r.i(a.a)(e.value,o.mask,!0,o.tokens);u!==e.value&&(e.value=u,e.dispatchEvent(n("input")))}},function(e,t,r){"use strict";var n=r(6),a=r(5);t.a=function(e,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return Array.isArray(t)?r.i(a.a)(n.a,t,i)(e,t,o,i):r.i(n.a)(e,t,o,i)}},function(e,t,r){"use strict";function n(e){e.component(u.a.name,u.a),e.directive("mask",i.a)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r.n(a),i=r(1),s=r(7),u=r.n(s);r.d(t,"TheMask",(function(){return u.a})),r.d(t,"mask",(function(){return i.a})),r.d(t,"tokens",(function(){return o.a})),r.d(t,"version",(function(){return l}));var l="0.11.1";t.default=n,"undefined"!=typeof window&&window.Vue&&window.Vue.use(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=r(0),o=r.n(a),i=r(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return o.a}}},directives:{mask:n.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e;e=r.i(i.a)(e,this.mask,this.masked,this.tokens);e!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,r){"use strict";function n(e,t,r){return t=t.sort((function(e,t){return e.length-t.length})),function(n,a){for(var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;i<t.length;){var s=t[i];i++;var u=t[i];if(!(u&&e(n,u,!0,r).length>s.length))return e(n,s,o,r)}return""}}t.a=n},function(e,t,r){"use strict";function n(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3];e=e||"",t=t||"";for(var a=0,o=0,i="";a<t.length&&o<e.length;){var s=t[a],u=n[s],l=e[o];u&&!u.escape?(u.pattern.test(l)&&(i+=u.transform?u.transform(l):l,a++),o++):(u&&u.escape&&(a++,s=t[a]),r&&(i+=s),l===s&&o++,a++)}for(var c="";a<t.length&&r;){s=t[a];if(n[s]){c="";break}c+=s,a++}return i+c}t.a=n},function(e,t,r){var n=r(8)(r(4),r(9),null,null);e.exports=n.exports},function(e,t){e.exports=function(e,t,r,n){var a,o=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(a=e,o=e.default);var s="function"==typeof o?o.options:o;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),r&&(s._scopeId=r),n){var u=s.computed||(s.computed={});Object.keys(n).forEach((function(e){var t=n[e];u[e]=function(){return t}}))}return{esModule:a,exports:o,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,r){e.exports=r(3)}])}))},8181:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(641),a=r(3751),o=r(33);const i={class:"cadastro"},s={key:0,class:"erro"},u=["disabled"],l={key:0},c={key:1};function d(e,t,r,d,f,m){const p=(0,n.g2)("router-link"),h=(0,n.gN)("mask");return(0,n.uX)(),(0,n.CE)("div",i,[t[12]||(t[12]=(0,n.Lk)("h2",null,"Cadastro",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>f.nome=e),placeholder:"Nome",onBlur:t[1]||(t[1]=(...e)=>m.formatarNome&&m.formatarNome(...e))},null,544),[[a.Jo,f.nome]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>f.email=e),placeholder:"Email",type:"email"},null,512),[[a.Jo,f.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>f.password=e),placeholder:"Senha",type:"password"},null,512),[[a.Jo,f.password]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>f.endereco=e),placeholder:"Endereço (com apt)"},null,512),[[a.Jo,f.endereco]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>f.cpf=e),placeholder:"CPF (XXX.XXX.XXX-XX)"},null,512),[[a.Jo,f.cpf],[h,"###.###.###-##"]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>f.rg=e),placeholder:"RG (12.345.678-9)"},null,512),[[a.Jo,f.rg],[h,"##.###.###-#"]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>f.dataNascimento=e),placeholder:"Data de Nascimento (DD/MM/AAAA)"},null,512),[[a.Jo,f.dataNascimento],[h,"##/##/####"]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>f.telefone=e),placeholder:"Telefone ((92)98471-3059)"},null,512),[[a.Jo,f.telefone],[h,"(##)#####-####"]]),f.mensagemErro?((0,n.uX)(),(0,n.CE)("p",s,(0,o.v_)(f.mensagemErro),1)):(0,n.Q3)("",!0),(0,n.Lk)("button",{disabled:f.loading,onClick:t[9]||(t[9]=(...e)=>m.cadastrar&&m.cadastrar(...e))},[f.loading?((0,n.uX)(),(0,n.CE)("span",c,"Carregando...")):((0,n.uX)(),(0,n.CE)("span",l,"Cadastrar"))],8,u),(0,n.Lk)("p",null,[t[11]||(t[11]=(0,n.eW)("Já tem uma conta? ")),(0,n.bF)(p,{to:"/"},{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.eW)("Faça login")]))),_:1})])])}r(4114),r(8111),r(1701);var f=r(1389),m=r(1884),p=r(1394),h=r(7547),v={directives:{mask:h.mask},data(){return{nome:"",email:"",password:"",endereco:"",cpf:"",rg:"",dataNascimento:"",telefone:"",mensagemErro:"",loading:!1}},methods:{formatarNome(){this.nome&&(this.nome=this.nome.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))},validarCPF(e){const t=/^\d{3}\.\d{3}\.\d{3}-\d{2}$/;return t.test(e)&&!/(\d)\1{10}/.test(e.replace(/\D/g,""))},validarRG(e){const t=/^\d{2}\.\d{3}\.\d{3}-\d{1}$/;return t.test(e)},validarDataNascimento(e){const t=/^\d{2}\/\d{2}\/\d{4}$/;if(!t.test(e))return!1;const[r,n,a]=e.split("/").map(Number),o=new Date,i=o.getFullYear();return!(a>i||a<1900)&&(!(n<1||n>12)&&!(r<1||r>31))},validarTelefone(e){const t=/^\(\d{2}\)\d{5}-\d{4}$/;return t.test(e)},async cadastrar(){this.mensagemErro="",this.loading=!0;try{if(!this.nome||!this.email||!this.password||!this.endereco||!this.cpf||!this.rg||!this.dataNascimento||!this.telefone)return void(this.mensagemErro="Preencha todos os campos.");if(!this.validarCPF(this.cpf))return void(this.mensagemErro="CPF inválido. Formato esperado: XXX.XXX.XXX-XX");if(!this.validarRG(this.rg))return void(this.mensagemErro="RG inválido. Formato esperado: 12.345.678-9");if(!this.validarDataNascimento(this.dataNascimento))return void(this.mensagemErro="Data de nascimento inválida.");if(!this.validarTelefone(this.telefone))return void(this.mensagemErro="Telefone inválido. Formato esperado: (92)98471-3059");this.formatarNome();const e=(0,f.xI)(),t=await(0,f.eJ)(e,this.email,this.password),r=t.user;await(0,m.BN)((0,m.H9)(p.db,"usuarios",r.uid),{nome:this.nome,email:this.email,endereco:this.endereco,cpf:this.cpf,rg:this.rg,dataNascimento:this.dataNascimento,telefone:this.telefone,pedidos:[],role:"morador"}),alert("Cadastro realizado com sucesso!"),this.resetForm(),this.$router.push("/")}catch(e){console.error("Erro durante o cadastro:",e),this.tratarErroFirebase(e)}finally{this.loading=!1}},tratarErroFirebase(e){if(e.code)switch(e.code){case"auth/email-already-in-use":this.mensagemErro="Este e-mail já está em uso.";break;case"auth/invalid-email":this.mensagemErro="E-mail inválido.";break;case"auth/weak-password":this.mensagemErro="A senha deve ter pelo menos 6 caracteres.";break;default:this.mensagemErro="Ocorreu um erro ao cadastrar. Tente novamente mais tarde.";break}else this.mensagemErro="Ocorreu um erro inesperado. Tente novamente mais tarde."},resetForm(){this.nome="",this.email="",this.password="",this.endereco="",this.cpf="",this.rg="",this.dataNascimento="",this.telefone=""}}},g=r(6262);const k=(0,g.A)(v,[["render",d],["__scopeId","data-v-177f393a"]]);var y=k},9462:function(e,t,r){"use strict";var n=r(9565),a=r(2360),o=r(6699),i=r(6279),s=r(8227),u=r(1181),l=r(5966),c=r(7657).IteratorPrototype,d=r(2529),f=r(9539),m=s("toStringTag"),p="IteratorHelper",h="WrapForValidIterator",v=u.set,g=function(e){var t=u.getterFor(e?h:p);return i(a(c),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return d(void 0,!0);try{var n=r.nextHandler();return r.returnHandlerResult?n:d(n,r.done)}catch(a){throw r.done=!0,a}},return:function(){var r=t(this),a=r.iterator;if(r.done=!0,e){var o=l(a,"return");return o?n(o,a):d(void 0,!0)}if(r.inner)try{f(r.inner.iterator,"normal")}catch(i){return f(a,"throw",i)}return a&&f(a,"normal"),d(void 0,!0)}})},k=g(!0),y=g(!1);o(y,m,"Iterator Helper"),e.exports=function(e,t,r){var n=function(n,a){a?(a.iterator=n.iterator,a.next=n.next):a=n,a.type=t?h:p,a.returnHandlerResult=!!r,a.nextHandler=e,a.counter=0,a.done=!1,v(this,a)};return n.prototype=t?k:y,n}}}]);
//# sourceMappingURL=181.2e87a719.js.map