(self["webpackChunkporta_facil"]=self["webpackChunkporta_facil"]||[]).push([[955],{7547:function(e){(function(t,n){e.exports=n()})(0,(function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,n){"use strict";function a(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var o=n(2),r=n(0),i=n.n(r);t.a=function(e,t){var r=t.value;if((Array.isArray(r)||"string"==typeof r)&&(r={mask:r,tokens:i.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var s=e.getElementsByTagName("input");if(1!==s.length)throw new Error("v-mask directive requires 1 input, found "+s.length);e=s[0]}e.oninput=function(t){if(t.isTrusted){var i=e.selectionEnd,s=e.value[i-1];for(e.value=n.i(o.a)(e.value,r.mask,!0,r.tokens);i<e.value.length&&e.value.charAt(i-1)!==s;)i++;e===document.activeElement&&(e.setSelectionRange(i,i),setTimeout((function(){e.setSelectionRange(i,i)}),0)),e.dispatchEvent(a("input"))}};var u=n.i(o.a)(e.value,r.mask,!0,r.tokens);u!==e.value&&(e.value=u,e.dispatchEvent(a("input")))}},function(e,t,n){"use strict";var a=n(6),o=n(5);t.a=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return Array.isArray(t)?n.i(o.a)(a.a,t,i)(e,t,r,i):n.i(a.a)(e,t,r,i)}},function(e,t,n){"use strict";function a(e){e.component(u.a.name,u.a),e.directive("mask",i.a)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o),i=n(1),s=n(7),u=n.n(s);n.d(t,"TheMask",(function(){return u.a})),n.d(t,"mask",(function(){return i.a})),n.d(t,"tokens",(function(){return r.a})),n.d(t,"version",(function(){return c}));var c="0.11.1";t.default=a,"undefined"!=typeof window&&window.Vue&&window.Vue.use(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(0),r=n.n(o),i=n(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return r.a}}},directives:{mask:a.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e;e=n.i(i.a)(e,this.mask,this.masked,this.tokens);e!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,n){"use strict";function a(e,t,n){return t=t.sort((function(e,t){return e.length-t.length})),function(a,o){for(var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;i<t.length;){var s=t[i];i++;var u=t[i];if(!(u&&e(a,u,!0,n).length>s.length))return e(a,s,r,n)}return""}}t.a=a},function(e,t,n){"use strict";function a(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments[3];e=e||"",t=t||"";for(var o=0,r=0,i="";o<t.length&&r<e.length;){var s=t[o],u=a[s],c=e[r];u&&!u.escape?(u.pattern.test(c)&&(i+=u.transform?u.transform(c):c,o++),r++):(u&&u.escape&&(o++,s=t[o]),n&&(i+=s),c===s&&r++,o++)}for(var d="";o<t.length&&n;){s=t[o];if(a[s]){d="";break}d+=s,o++}return i+d}t.a=a},function(e,t,n){var a=n(8)(n(4),n(9),null,null);e.exports=a.exports},function(e,t){e.exports=function(e,t,n,a){var o,r=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(o=e,r=e.default);var s="function"==typeof r?r.options:r;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),n&&(s._scopeId=n),a){var u=s.computed||(s.computed={});Object.keys(a).forEach((function(e){var t=a[e];u[e]=function(){return t}}))}return{esModule:o,exports:r,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,n){e.exports=n(3)}])}))},7588:function(e,t,n){"use strict";var a=n(6518),o=n(2652),r=n(9306),i=n(8551),s=n(1767);a({target:"Iterator",proto:!0,real:!0},{forEach:function(e){i(this),r(e);var t=s(this),n=0;o(t,(function(t){e(t,n++)}),{IS_RECORD:!0})}})},9955:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(641),o=n(3751);const r={class:"entrada-encomendas"},i=["disabled"],s=["disabled"];function u(e,t,n,u,c,d){const l=(0,a.gN)("mask");return(0,a.uX)(),(0,a.CE)("div",r,[t[10]||(t[10]=(0,a.Lk)("h3",null,"Cadastrar Nova Encomenda",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>d.cadastrarEncomenda&&d.cadastrarEncomenda(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.nomeCompleto=e),placeholder:"Nome do Morador",required:""},null,512),[[o.Jo,c.nomeCompleto]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.descricao=e),placeholder:"Descrição da Encomenda",required:""},null,512),[[o.Jo,c.descricao]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.remetente=e),placeholder:"Remetente",required:""},null,512),[[o.Jo,c.remetente]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>c.telefone=e),placeholder:"Telefone do Morador (xx)xxxxx-xxxx",required:""},null,512),[[o.Jo,c.telefone],[l,"(##)#####-####"]]),t[8]||(t[8]=(0,a.Lk)("button",{type:"submit"},"Cadastrar Encomenda",-1))],32),t[11]||(t[11]=(0,a.Lk)("h3",null,"Atualizar Status da Encomenda",-1)),(0,a.Lk)("form",{onSubmit:t[7]||(t[7]=(0,o.D$)(((...e)=>d.atualizarStatus&&d.atualizarStatus(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>c.codigoRastreioInput=e),placeholder:"Código de Rastreio",required:""},null,512),[[o.Jo,c.codigoRastreioInput]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>c.statusInput=e),disabled:!c.codigoRastreioInput},t[9]||(t[9]=[(0,a.Lk)("option",{value:"Aguardando retirada"},"Aguardando retirada",-1),(0,a.Lk)("option",{value:"Entregue"},"Entregue",-1)]),8,i),[[o.u1,c.statusInput]]),(0,a.Lk)("button",{type:"submit",disabled:!c.codigoRastreioInput},"Atualizar Status",8,s)],32)])}n(8111),n(7588);var c=n(1884),d=n(1394),l=n(7547),p={directives:{mask:l.mask},data(){return{nomeCompleto:"",descricao:"",remetente:"",telefone:"",codigoRastreioInput:"",statusInput:"Aguardando retirada"}},methods:{gerarCodigoAleatorio(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let n=0;n<8;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},async cadastrarEncomenda(){try{const e=this.gerarCodigoAleatorio(),t=await(0,c.gS)((0,c.rJ)(d.db,"encomendas"),{nomeCompleto:this.nomeCompleto,descricao:this.descricao,remetente:this.remetente,telefone:this.telefone,codigoRastreio:e,status:"Aguardando retirada",dataEntrada:(new Date).toISOString()});console.log("Encomenda cadastrada com ID:",t.id),this.enviarMensagemWhatsApp(this.telefone,e),this.nomeCompleto="",this.descricao="",this.remetente="",this.telefone="",this.$emit("entrega-adicionada")}catch(e){console.error("Erro ao cadastrar encomenda:",e)}},async atualizarStatus(){try{const e=(0,c.P)((0,c.rJ)(d.db,"encomendas"),(0,c._M)("codigoRastreio","==",this.codigoRastreioInput)),t=await(0,c.GG)(e);t.empty?console.error("Encomenda não encontrada com o código de rastreio fornecido."):t.forEach((async e=>{await(0,c.mZ)(e.ref,{status:this.statusInput}),console.log("Status atualizado para:",this.statusInput)}))}catch(e){console.error("Erro ao atualizar status:",e)}},enviarMensagemWhatsApp(e,t){const n=e.replace(/\D/g,""),a=`Olá, ${this.nomeCompleto}! Seu pedido chegou! Status: Aguardando retirada. Código: ${t}`,o=`https://wa.me/${n}?text=${encodeURIComponent(a)}`;window.open(o,"_blank")}}},f=n(6262);const m=(0,f.A)(p,[["render",u],["__scopeId","data-v-1c654ff4"]]);var h=m}}]);
//# sourceMappingURL=955.24c7a74b.js.map