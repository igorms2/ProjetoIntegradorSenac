"use strict";(self["webpackChunkporta_facil"]=self["webpackChunkporta_facil"]||[]).push([[103],{9103:function(a,e,o){o.r(e),o.d(e,{default:function(){return h}});var r=o(641),t=o(3751);const n={class:"login"};function i(a,e,o,i,l,s){const u=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",n,[e[4]||(e[4]=(0,r.Lk)("h2",null,"Login",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>l.email=a),placeholder:"Email",type:"email"},null,512),[[t.Jo,l.email]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.password=a),placeholder:"Senha",type:"password"},null,512),[[t.Jo,l.password]]),(0,r.Lk)("button",{onClick:e[2]||(e[2]=(...a)=>s.login&&s.login(...a))},"Entrar"),(0,r.Lk)("p",null,[(0,r.bF)(u,{to:"/"},{default:(0,r.k6)((()=>e[3]||(e[3]=[(0,r.eW)("Voltar à Página Inicial")]))),_:1})])])}o(4114);var l=o(1389),s=o(1884),u=o(1394),d={data(){return{email:"",password:""}},methods:{async login(){const a=(0,l.xI)();try{const e=await(0,l.x9)(a,this.email,this.password),o=e.user,r=await(0,s.x7)((0,s.H9)(u.db,"usuarios",o.uid));if(r.exists()){const a=r.data();alert("Login realizado com sucesso!"),this.$updateAbility(a.role),"morador"===a.role?this.$router.push("/dashboard-morador"):this.$router.push("/")}else alert("Dados do usuário não encontrados. Por favor, faça o cadastro novamente."),await(0,l.CI)(a)}catch(e){switch(console.error("Erro ao fazer login:",e),e.code){case"auth/user-not-found":alert("Usuário não encontrado. Verifique o email e tente novamente.");break;case"auth/wrong-password":alert("Senha incorreta. Tente novamente.");break;case"auth/invalid-email":alert("Email inválido. Verifique o email e tente novamente.");break;default:alert("Erro ao fazer login: "+e.message);break}}}}},c=o(6262);const p=(0,c.A)(d,[["render",i],["__scopeId","data-v-8bb5515c"]]);var h=p}}]);
//# sourceMappingURL=103.0ed533e4.js.map